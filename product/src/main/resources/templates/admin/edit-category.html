<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" xmlns:th="http://www.w3.org/1999/xhtml"
      layout:decorate="~{layout}">
<head>
    <title>Home</title>
</head>
<body>
<section layout:fragment="content"  class="container-fluid!important">
    <form th:action="@{/pages/category/update}" th:object="${categoryDTO}" method="post" enctype="multipart/form-data">
        <div class="modal-dialog " role="document">
            <div class="modal-content"style="background-color: white" >
                <div class="modal-header">
                    <h5 class="modal-title">Sửa danh mục sản phẩm</h5>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label class="col-form-label my-2">Tên danh mục sản phẩm</label>
                        <input type="text" class="form-control my-2" name="categoriesName" id="categoriesName" th:value="${category.categoriesName}">
                    </div>

                    <div class="form-group">
                        <input class="my-2" type="hidden" id="id" name="id" th:value="${category.id}">
                        <label class="my-2 mr-4 col-form-labelmy-2">Hình ảnh</label>
                        <input class ="my-2" type="text" th:value="${category.image}" id="image" name="image" readonly="readonly">
                        <input type="file" class="my-2 form-control-file" id="photo" name="photo">

                    </div>
                </div>

                    <button type="submit" class="btn btn-primary my-2">Lưu</button>
            </div>
        </div>
    </form>
    </div>
</section>
</body>
</html>
<script>

    // $(function() {
    //     //hang on event of form with id=myform
    //     $("#category").submit(function(e) {
    //
    //         //prevent Default functionality
    //         e.preventDefault();
    //
    //         //get the action-url of the form
    //         var actionurl = e.currentTarget.action;
    //
    //         const data = new FormData(e.target);
    //         //var formData = JSON.stringify($("#category").serializeArray());
    //
    //         const formData = Object.fromEntries(data.entries());
    //         //do your own request an handle the results
    //         $.ajax({
    //             url: actionurl,
    //             type: 'post',
    //             dataType: "json",
    //             contentType : "application/json",
    //             data:JSON.stringify(formData),
    //             success: function(data) {
    //
    //                 // Ajax call completed successfully
    //                 alert("Form Submited Successfully");
    //                 const baseURL=actionurl.split("/");
    //                 location.href=baseURL[1]+"/pages/category-elements"
    //             },
    //             error: function(data) {
    //
    //                 // Some error in ajax call
    //                 alert("some Error");
    //                 alert(data);
    //             },
    //         });
    //         alert("Submit form"+formData);
    //
    //     });
    //
    // });
    // // function handleSubmit(event) {
    // //     event.preventDefault();
    // //     const data = new FormData(event.target);
    // //     const value = Object.fromEntries(data.entries());
    // //
    // //     console.log({ value });
    // //
    // // }
    // //
    // // const form = document.querySelector('#category');
    // // form.addEventListener('submit', handleSubmit);
    // function readURL(input) {
    //     if (input.files && input.files[0]) {
    //         var reader = new FileReader();
    //
    //         reader.onload = function (e) {
    //             $('#blah').attr('src', e.target.result);
    //         }
    //
    //         reader.readAsDataURL(input.files[0]);
    //     }
    // }
    //
    // $("#imgInp").change(function(){
    //     readURL(this);
    // })
</script>